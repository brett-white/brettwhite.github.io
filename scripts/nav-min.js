window.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector("nav"),t=e.offsetHeight||60,o=.96*t,n=document.querySelectorAll("main > section"),i=e.querySelectorAll("a"),c=e=>{if(!e)return;const t=document.querySelector(e);if(t){const e=t.getBoundingClientRect().top+window.scrollY-o;window.scrollTo({top:e,behavior:"smooth"})}};i.forEach((e=>e.addEventListener("click",(t=>{t.preventDefault(),c(e.getAttribute("href"))})))),c(window.location.hash),window.addEventListener("hashchange",(()=>{c(window.location.hash)}));const r=()=>{const e=window.scrollY;let o=-1;n.forEach(((n,i)=>{const c=n.offsetTop,r=n.offsetHeight,a=window.innerHeight;e>=c-a/2-t&&e<c+r&&(o=i)})),i.forEach(((e,t)=>{e.classList.toggle("active",t===o)}))},a=(e,t)=>{let o,n;return function(){const i=this,c=arguments;n?(clearTimeout(o),o=setTimeout((function(){Date.now()-n>=t&&(e.apply(i,c),n=Date.now())}),t-(Date.now()-n))):(e.apply(i,c),n=Date.now())}};r(),window.addEventListener("scroll",a(r,100))}));